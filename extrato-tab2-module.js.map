{"version":3,"sources":["webpack:///./src/app/users/home/extrato/tab2.module.ts","webpack:///./src/app/users/home/extrato/tab2.page.html","webpack:///./src/app/users/home/extrato/tab2.page.scss","webpack:///./src/app/users/home/extrato/tab2.page.ts"],"names":[],"mappings":"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","file":"extrato-tab2-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { Tab2Page } from './tab2.page';\r\nimport { MaterialModule } from 'src/app/material.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: Tab2Page\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MaterialModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [Tab2Page]\r\n})\r\nexport class Tab2PageModule {}\r\n","module.exports = \"<ion-header class=\\\"header-extrato \\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-toggle auto-hide=\\\"false\\\"><i class=\\\"fas fa-align-left icon-menu\\\"></i></ion-menu-toggle>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <span class=\\\"extrato_titulo\\\">saldo atual</span>\\r\\n          <span class=\\\"extrato_pontos\\\">{{points}}</span>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-searchbar placeholder=\\\"Pesquisar\\\" animated (ionInput)=\\\"filterExtract($event.srcElement.value,startDate,endDate)\\\"></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n\\r\\n</ion-header>\\r\\n\\r\\n\\r\\n<ion-content padding=\\\"true\\\" class=\\\"app\\\">\\r\\n  <ion-grid>\\r\\n\\r\\n    <ion-row class=\\\"ion-col-padding margin-bottom\\\">\\r\\n      <ion-col size=\\\"6\\\">\\r\\n        <ion-label>In√≠cio</ion-label>\\r\\n        <ion-item>\\r\\n          <ion-datetime (ionChange)=\\\"updateStartDate($event.detail.value)\\\" dateFormat=\\\"DD/MM/YYYY\\\"\\r\\n            placeholder=\\\"dd/mm/aa\\\" displayFormat=\\\"DD/MM/YYYY\\\" monthShortNames=\\\"jan, fev, mar, abr, mai, jun, jul, ago, set, out, nov, dez\\\"> </ion-datetime>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"6\\\">\\r\\n        <ion-label>Fim</ion-label>\\r\\n        <ion-item>\\r\\n          <ion-datetime (ionChange)=\\\"updateEndDate($event.detail.value)\\\"dateFormat=\\\"DD/MM/YYYY\\\"\\r\\n          placeholder=\\\"dd/mm/aa\\\" displayFormat=\\\"DD/MM/YYYY\\\" monthShortNames=\\\"jan, fev, mar, abr, mai, jun, jul, ago, set, out, nov, dez\\\">\\r\\n          </ion-datetime>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row>\\r\\n      <div class=\\\"extrato-box\\\" *ngFor=\\\"let extractItem of filteredExtract\\\">\\r\\n        <ion-row>\\r\\n          <ion-col size=\\\"2\\\">\\r\\n            <img src=\\\"../../../../assets/imgs/piggy.png\\\">\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"6\\\">\\r\\n            <ion-row>\\r\\n              <ion-col><span class=\\\"extrato-nome\\\">{{extractItem.getNome()}}</span>\\r\\n                <span class=\\\"extrato-data\\\">{{extractItem.getTipo()}}</span>\\r\\n              </ion-col>\\r\\n            </ion-row>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"4\\\" class=\\\"text-right\\\"><span class=\\\"extrato-valor\\\" [ngClass]=\\\"{\\r\\n            'extrato-pos':extractItem.getValor()>=0,\\r\\n            'extrato-neg':extractItem.getValor()<0\\r\\n          }\\\">{{extractItem.getValor()}}</span> <span\\r\\n              class=\\\"extrato-data\\\">{{extractItem.getData().getUTCDate()}}/{{extractItem.getData().getUTCMonth()+1}}/{{extractItem.getData().getUTCFullYear()}}</span>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </div>\\r\\n      <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\r\\n        <ion-infinite-scroll-content loadingSpinner=\\\"dots\\\" loadingText=\\\"Carregando mais...\\\">\\r\\n        </ion-infinite-scroll-content>\\r\\n      </ion-infinite-scroll>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3VzZXJzL2hvbWUvZXh0cmF0by90YWIyLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ExtractItem } from 'src/models/ExtractItem';\r\nimport { BackendApiProvider } from 'src/providers/backend-api/backend-api.service';\r\nimport { Utils } from 'src/commons/Utils';\r\nimport { ToastText } from 'src/commons/Constants';\r\n\r\n//-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n@Component({\r\n  selector: 'app-tab2',\r\n  templateUrl: './tab2.page.html',\r\n  styleUrls: ['./tab2.page.scss'],\r\n})\r\n\r\n//-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\nexport class Tab2Page {\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  private readonly logHeader = \"ExtratoPage>>\";\r\n  private extract: Array<ExtractItem>;\r\n  public filteredExtract: Array<ExtractItem>;\r\n  public startDate: Date;\r\n  public endDate: Date;\r\n  private searchTerm: string;\r\n  public points: number;\r\n  private page: number = 1;\r\n  private totalPages: number;\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  constructor(private api: BackendApiProvider,\r\n    private utils: Utils) {\r\n    const logHeader = this.logHeader + \"constructor>>\";\r\n    Utils.log(logHeader);\r\n    this.getExtract();\r\n    this.getPoints();\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  getExtract() {\r\n    const logHeader = this.logHeader + \"getExtract>>\";\r\n    Utils.log(logHeader);\r\n    this.api.getExtract(1).then((response: any) => {\r\n      let extract: Array<ExtractItem> = response.list;\r\n      this.totalPages = response.totalPages;\r\n      extract.sort((a: ExtractItem, b: ExtractItem) => {\r\n        return b.getData().getTime() - a.getData().getTime();\r\n      });\r\n      this.extract = extract;\r\n      this.filterExtract(this.searchTerm, this.startDate, this.endDate)\r\n    }).catch((error) => this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG));\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  getPoints() {\r\n    this.api.getPoints().then((points: number) => {\r\n      this.points = points;\r\n    }).catch((error) => this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG));\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  async updateStartDate(evt: string) {\r\n    const logHeader = this.logHeader + \"updateStartDate>>\";\r\n    Utils.log(logHeader);\r\n    evt = evt.split('T')[0]\r\n    this.startDate = new Date(evt);\r\n    this.filterExtract(this.searchTerm, this.startDate, this.endDate);\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  async updateEndDate(evt) {\r\n    const logHeader = this.logHeader + \"updateEndDate>>\";\r\n    Utils.log(logHeader);\r\n    evt = evt.split('T')[0]\r\n    this.endDate = new Date(evt);\r\n    this.filterExtract(this.searchTerm, this.startDate, this.endDate);\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  async filterExtract(searchTerm, startDate, endDate) {\r\n    const logHeader = this.logHeader + \"filterExtract>>\";\r\n    Utils.log(logHeader);\r\n    this.searchTerm = searchTerm;\r\n    if (Utils.isStringInvalid(searchTerm) && Utils.isVarInvalid(startDate) && Utils.isVarInvalid(endDate)) {\r\n      this.filteredExtract = this.extract;\r\n      return;\r\n    }\r\n    this.filteredExtract = this.extract.filter(function (element) {\r\n      let result = true;\r\n      if (!Utils.isStringInvalid(searchTerm)) {\r\n        result = result && (element.getNome().toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n          element.getData().toLocaleString().toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n          element.getValor().toString().includes(searchTerm.toLowerCase()))\r\n      }\r\n      if (!Utils.isVarInvalid(startDate)) {\r\n        result = result && element.getData() >= startDate;\r\n      }\r\n      if (!Utils.isVarInvalid(endDate)) {\r\n        result = result && element.getData() <= endDate;\r\n      }\r\n      return result;\r\n    });\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  loadData(event) {\r\n    this.page++;\r\n    const infiniteScroll = event.target;\r\n    this.api.getExtract(1).then((response: any) => {\r\n      let extract: Array<ExtractItem> = response.list;\r\n      this.totalPages = response.totalPages;\r\n      this.extract = this.extract.concat(extract);\r\n      this.extract.sort((a: ExtractItem, b: ExtractItem) => {\r\n        return b.getData().getTime() - a.getData().getTime();\r\n      });\r\n      this.filterExtract(this.searchTerm, this.startDate, this.endDate);\r\n      infiniteScroll.complete();\r\n      infiniteScroll.disabled = this.page >= this.totalPages;\r\n    }).catch((error) => this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG));\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n}"],"sourceRoot":""}