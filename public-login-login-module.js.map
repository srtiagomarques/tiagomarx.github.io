{"version":3,"sources":["webpack:///./src/app/public/login/login.module.ts","webpack:///./src/app/public/login/login.page.html","webpack:///./src/app/public/login/login.page.scss","webpack:///./src/app/public/login/login.page.ts"],"names":[],"mappings":"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","file":"public-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { LoginPage } from './login.page';\r\nimport { MaterialModule } from 'src/app/material.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MaterialModule,\r\n    ReactiveFormsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","module.exports = \"<ion-content padding=\\\"true\\\" class='background'>\\n  <form [formGroup]=\\\"form\\\">\\n    <ion-grid>\\n      <ion-row color=\\\"primary\\\" class=\\\"ion-justify-content-center\\\">\\n        <ion-col class=\\\"ion-align-self-center\\\" size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\n\\n          <div class=\\\"ion-text-center\\\">\\n            <img src=\\\"assets/imgs/logo_pb.png\\\">\\n\\n            <span class=\\\"first-title\\\">\\n              <ion-item>\\n                <a routerLink=\\\"/register\\\" routerDirection=\\\"forward\\\">Primeiro Acesso ?</a>\\n              </ion-item>\\n            </span>\\n\\n            <span class=\\\"title\\\">\\n              Preencha com seus dados para acessar\\n            </span>\\n          </div>\\n\\n          <div class=\\\"content-center\\\">\\n            <ion-label>E-mail @mdlz.com</ion-label>\\n            <mat-icon class=\\\"main-icon\\\" matSuffix>account_circle</mat-icon>\\n            <mat-form-field class=\\\"full-width\\\">\\n              <input matInput autocomplete=\\\"off\\\" formControlName=\\\"email\\\" class=\\\"lowercase\\\">\\n            </mat-form-field>\\n\\n            <ion-label>Senha</ion-label>\\n            <mat-icon class=\\\"main-icon\\\" matSuffix>lock</mat-icon>\\n            <mat-form-field class=\\\"full-width\\\">\\n              <input matInput [type]=\\\"hide ? 'password' : 'text'\\\" autocomplete=\\\"off\\\" formControlName=\\\"password\\\">\\n              <mat-icon class=\\\"dark-icon\\\" matSuffix (click)=\\\"hide = !hide\\\">{{hide ? 'visibility' : 'visibility_off'}}\\n              </mat-icon>\\n            </mat-form-field>\\n\\n          </div>\\n          <div class=\\\"ion-margin-bottom\\\">\\n            <button   type=\\\"submit\\\" (click)=\\\"login()\\\" class=\\\"btn-mdlz\\\" block>\\n              Entrar</button>\\n          </div>\\n\\n          <div class=\\\"ion-text-center\\\">\\n            <ion-item r>\\n              <a routerLink=\\\"/recovery\\\" routerDirection=\\\"forward\\\">Problemas para realizar seu login?</a>\\n            </ion-item>\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\"","module.exports = \".ion-align-self-center {\\n  position: absolute;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  padding: 0 20px !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHVibGljL2xvZ2luL0Q6XFxEZXNrdG9wXFxQcm9qZXRvc1xcRGVzZW52b2x2aW1lbnRvXFxNb25kZWxlelxcUGx1c1xcR0lUX01vbmRlbGV6UGx1c1xcZnJvbnQvc3JjXFxhcHBcXHB1YmxpY1xcbG9naW5cXGxvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsMkJBQTJCO0VBQzNCLDBCQUEwQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcHVibGljL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pb24tYWxpZ24tc2VsZi1jZW50ZXIge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiA1MCU7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XHJcbiAgICBwYWRkaW5nOiAwIDIwcHggIWltcG9ydGFudDtcclxufSJdfQ== */\"","import { AuthenticationService } from './../../services/authentication.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { MenuController, Platform } from '@ionic/angular';\r\nimport { BackendApiProvider } from 'src/providers/backend-api/backend-api.service';\r\nimport { Utils } from 'src/commons/Utils';\r\nimport { FormGroup, FormControl, Validators, FormBuilder } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { ToastText, LoadingText, UserType, ErrorType } from 'src/commons/Constants';\r\nimport { User } from 'src/models/User';\r\n\r\n//-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\n\r\n//-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\nexport class LoginPage implements OnInit {\r\n\r\n  private readonly logHeader = \"LoginPage>>\";\r\n  form: FormGroup;\r\n  hide = true;\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  constructor(\r\n    private platform: Platform,\r\n    private authService: AuthenticationService,\r\n    public menu: MenuController,\r\n    private api: BackendApiProvider,\r\n    private formBuilder: FormBuilder,\r\n    private router: Router,\r\n    private utils: Utils) {\r\n    let logHeader = this.logHeader + \"constructor>>\";\r\n    Utils.log(logHeader);\r\n    this.form = this.formBuilder.group({\r\n      email: new FormControl('', Validators.compose([\r\n        Validators.required\r\n      ])),\r\n\r\n      password: new FormControl('', Validators.compose([\r\n        Validators.required,\r\n        Validators.minLength(6),\r\n        Validators.maxLength(30)\r\n      ]))\r\n    });\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  ngOnInit() {\r\n    this.menu.enable(false);\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  ionViewDidEnter(){\r\n    this.menu.enable(false);\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  login() {\r\n    this.api.login(this.form.value.email, this.form.value.password).subscribe(\r\n      data => {\r\n        const user = User.castFromJSON(data[`_body`]);\r\n        this.authService.setAuthObject(user);\r\n        this.authService.setAuthObject(user);\r\n        this.appStartNavigation(user);\r\n      },\r\n      error => {\r\n        try {\r\n          let message = JSON.parse(error._body).message as string;\r\n          if (message.includes(ErrorType.BAD_CREDENTIALS)) {\r\n            this.utils.simpleToastError(ToastText.BAD_PASSWORD);\r\n          }\r\n          else if (message.includes(ErrorType.USER_NOT_FOUND)) {\r\n            this.utils.simpleToastError(ToastText.BAD_LOGIN);\r\n          }\r\n          else if (message.includes(ErrorType.USER_DISABLED)) {\r\n            this.utils.simpleToastError(ToastText.USER_DISABLED);\r\n          }\r\n          else if (error.status == 0) {\r\n            this.utils.simpleToastError(ToastText.COMMUNICATION_FAILURE);\r\n          }\r\n          else {\r\n            this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG);\r\n          }\r\n        }\r\n        catch{\r\n          this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG);\r\n        }\r\n\r\n      }\r\n    );\r\n\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n  appStartNavigation(user: User) {\r\n    const logHeader = this.logHeader + \"appStartNavigation>>\";\r\n    Utils.log(logHeader);\r\n    if (user.isFinalizado()) {\r\n      this.menu.enable(true);\r\n      if (user.getTipo() == UserType.ADMINISTRATOR) {\r\n        Utils.log(logHeader + \"USER>>ADMINISTRATOR\");\r\n        this.router.navigate(['admin', 'dashboard']).then(o => {\r\n          this.utils.simpleToast(ToastText.WELCOME);\r\n        }).catch(error => {\r\n          this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG)\r\n        });\r\n      }\r\n      else {\r\n        Utils.log(logHeader + \"USER>>COMMON\");\r\n        this.router.navigate(['home', 'extrato']).then(o => {\r\n          this.utils.simpleToast(ToastText.WELCOME);\r\n        }).catch(error => {\r\n          this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG)\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      Utils.log(logHeader + \"USER>>NOT_FINALIZADO\");\r\n      this.router.navigate(['email-confirm']).then(o => {\r\n\r\n      }).catch((error) => this.utils.simpleToastError(error + '\\n' + ToastText.SOMETHING_WENT_WRONG));\r\n\r\n    }\r\n\r\n  }\r\n\r\n  //-------------------------------------------------------------------------------------------------------------------------------//\r\n\r\n}"],"sourceRoot":""}