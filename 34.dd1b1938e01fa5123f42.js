(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{Eob8:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),r=t("mrSG"),i=t("68on"),u=t("VPMT"),a=t("3xpO"),o=t("hEg4"),s=t("Zkqg"),c=t("ZZ/e"),b=t("g4h+"),d=t("aCXV"),p=function(){function n(n,l,t,e,r,i){var a=this;this.actionSheetController=n,this.modalController=l,this.popoverController=t,this.api=e,this.utils=r,this.pageDataService=i,this.logHeader="PrizePage>>",this.rewards=new Array,this.rewardList=new Array,this.imageConcatString=u.a.generateRandomString(),u.a.log(this.logHeader+"constructor>>"),this.getRewards(),this.pageDataService.listUserEvent.subscribe(function(){a.imageConcatString=u.a.generateRandomString();var n=a.pageDataService.getData("rewardData"),l=a.pageDataService.getData("rewardEdit");a.pageDataService.removeData("rewardData"),a.pageDataService.removeData("rewardEdit"),u.a.isVarInvalid(n)||(u.a.isVarInvalid(l)||a.rewards.splice(a.rewards.indexOf(a.rewards.filter(function(l){return l.getId()==n.getId()})[0]),1),a.rewards.push(n),a.filter(a.searchTerm))}),this.pageDataService.imageChangeEvent.subscribe(function(){a.imageConcatString=u.a.generateRandomString()})}return n.prototype.getRewards=function(){var n=this;this.api.getRewards().then(function(l){n.imageConcatString=u.a.generateRandomString(),n.rewards=l,n.rewardList=n.rewards}).catch(function(l){return n.utils.simpleToast(l+"\n"+s.h.SOMETHING_WENT_WRONG)})},n.prototype.filter=function(n){if(u.a.log(this.logHeader+"filter>>"),u.a.isStringInvalid(n))this.rewardList=this.rewards;else{var l=n;this.searchTerm=l,this.rewardList=l?this.rewards.filter(function(n){return n.getNome().toLowerCase().includes(l.toLowerCase())||n.getDescricao().toLowerCase().includes(l.toLowerCase())}):this.rewards}},n.prototype.abrirActionSheet=function(n){return r.b(this,void 0,void 0,function(){var l=this;return r.e(this,function(t){switch(t.label){case 0:return[4,this.actionSheetController.create({header:s.g.WHAT_DO_YOU_WANT_TO_DO,buttons:[{text:s.g.EDIT,handler:function(){l.presentEditPopover(n)}},{text:s.g.DELETE,role:"destructive",handler:function(){l.api.removeReward(n).then(function(){l.rewards.splice(l.rewards.indexOf(n),1),l.filter(l.searchTerm),l.utils.simpleToast(s.h.REWARD_REMOVED)}).catch(function(n){return l.utils.simpleToastError(n+"\n"+s.h.SOMETHING_WENT_WRONG)})}},{text:s.g.CANCEL,role:"cancel",handler:function(){}}]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},n.prototype.presentEditPopover=function(n){return r.b(this,void 0,void 0,function(){var l,t,e;return r.e(this,function(r){switch(r.label){case 0:return[4,this.modalController.create({component:b.a,backdropDismiss:!1,componentProps:{reward:n}})];case 1:return[4,(l=r.sent()).present()];case 2:return r.sent(),[4,l.onDidDismiss()];case 3:return t=r.sent().data,e=a.a.castFromJSON(t),!u.a.isVarInvalid(t)&&this.rewards.indexOf(this.rewards.filter(function(n){return n.getId()==e.getId()})[0])>=0&&(this.rewards.splice(this.rewards.indexOf(this.rewards.filter(function(n){return n.getId()==e.getId()})[0]),1),this.rewards.push(e),this.filter(this.searchTerm)),[2]}})})},n.prototype.openMenu=function(n){return r.b(this,void 0,void 0,function(){return r.e(this,function(l){switch(l.label){case 0:return this.DismissClick(),[4,this.popoverController.create({component:o.a,event:n,animated:!0,showBackdrop:!0,translucent:!0,cssClass:"popover_class"})];case 1:return[4,l.sent().present()];case 2:return[2,l.sent()]}})})},n.prototype.DismissClick=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.popoverController.dismiss()];case 1:return n.sent(),[2]}})})},n.prototype.loadData=function(n){var l=this;setTimeout(function(){console.log("Done"),n.target.complete(),l.imageConcatString=u.a.generateRandomString(),1e3==l.rewardList.length&&(n.target.disabled=!0)},500)},n}(),h=function(){return function(){}}(),g=t("pMnS"),f=t("Ip0R"),m=t("oBZk"),v=t("gIcY"),w=e.qb({encapsulation:0,styles:[[""]],data:{}});function k(n){return e.Lb(0,[(n()(),e.sb(0,0,null,null,12,"div",[["class","box-prize"]],null,null,null,null,null)),e.rb(1,278528,null,0,f.j,[e.u,e.v,e.k,e.G],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Eb(2,{"box-disabled":0,"box-enabled":1}),(n()(),e.sb(3,0,null,null,1,"div",[["class","qta-txt"]],null,null,null,null,null)),(n()(),e.Jb(4,null,["",""])),(n()(),e.sb(5,0,null,null,1,"div",[["class","num-prize"]],null,null,null,null,null)),(n()(),e.Jb(6,null,["",""])),(n()(),e.sb(7,0,null,null,0,"img",[["onError","src = '../assets/imgs/no-image.png'"]],[[8,"src",4]],null,null,null,null)),(n()(),e.sb(8,0,null,null,1,"span",[["class","item-prize"]],null,null,null,null,null)),(n()(),e.Jb(9,null,["",""])),(n()(),e.sb(10,0,null,null,1,"span",[["class","valor-prize"]],null,null,null,null,null)),(n()(),e.Jb(11,null,[""," Pontos"])),(n()(),e.sb(12,0,null,null,0,"i",[["class","fas fa-ellipsis-v"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.abrirActionSheet(n.context.$implicit)&&e),e},null,null))],function(n,l){var t=n(l,2,0,!l.context.$implicit.isAtivo(),l.context.$implicit.isAtivo());n(l,1,0,"box-prize",t)},function(n,l){var t=l.component,r=l.context.$implicit.getDescricao();n(l,4,0,r);var i=null==l.context.$implicit.getQuantidade()?"Infinito":l.context.$implicit.getQuantidade();n(l,6,0,i);var u=e.ub(1,"",l.context.$implicit.getFoto()+"?"+t.imageConcatString,"");n(l,7,0,u);var a=l.context.$implicit.getNome();n(l,9,0,a);var o=l.context.$implicit.getValor();n(l,11,0,o)})}function C(n){return e.Lb(0,[e.Hb(402653184,1,{infiniteScroll:0}),(n()(),e.sb(1,0,null,null,26,"ion-header",[],null,null,null,m.ab,m.p)),e.rb(2,49152,null,0,c.D,[e.h,e.k,e.B],null,null),(n()(),e.sb(3,0,null,0,7,"ion-toolbar",[],null,null,null,m.vb,m.K)),e.rb(4,49152,null,0,c.Eb,[e.h,e.k,e.B],null,null),(n()(),e.sb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,m.P,m.e)),e.rb(6,49152,null,0,c.n,[e.h,e.k,e.B],null,null),(n()(),e.sb(7,0,null,0,2,"ion-menu-toggle",[["auto-hide","false"]],null,null,null,m.kb,m.A)),e.rb(8,49152,null,0,c.U,[e.h,e.k,e.B],null,null),(n()(),e.sb(9,0,null,0,0,"i",[["class","fas fa-align-left icon-menu"]],null,null,null,null,null)),(n()(),e.sb(10,0,null,0,0,"i",[["class","fas fa-ellipsis-h dot-ico"],["slot","end"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.openMenu(t)&&e),e},null,null)),(n()(),e.sb(11,0,null,0,10,"ion-toolbar",[["class","no-radius"]],null,null,null,m.vb,m.K)),e.rb(12,49152,null,0,c.Eb,[e.h,e.k,e.B],null,null),(n()(),e.sb(13,0,null,0,1,"span",[["class","title_t"]],null,null,null,null,null)),(n()(),e.Jb(-1,null,["Gest\xe3o"])),(n()(),e.sb(15,0,null,0,1,"span",[["class","title_w"]],null,null,null,null,null)),(n()(),e.Jb(-1,null,["de Pr\xeamios"])),(n()(),e.sb(17,0,null,0,4,"ion-buttons",[["slot","end"]],null,null,null,m.P,m.e)),e.rb(18,49152,null,0,c.n,[e.h,e.k,e.B],null,null),(n()(),e.sb(19,0,null,0,2,"ion-back-button",[["icon","arrow-back"],["text",""]],null,[[null,"click"]],function(n,l,t){var r=!0;return"click"===l&&(r=!1!==e.Cb(n,21).onClick(t)&&r),r},m.N,m.c)),e.rb(20,49152,null,0,c.i,[e.h,e.k,e.B],{icon:[0,"icon"],text:[1,"text"]},null),e.rb(21,16384,null,0,c.j,[[2,c.kb],c.Lb],null,null),(n()(),e.sb(22,0,null,0,5,"ion-toolbar",[],null,null,null,m.vb,m.K)),e.rb(23,49152,null,0,c.Eb,[e.h,e.k,e.B],null,null),(n()(),e.sb(24,0,null,0,3,"ion-searchbar",[["animated",""],["placeholder","Pesquisar"]],null,[[null,"ionInput"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var r=!0,i=n.component;return"ionBlur"===l&&(r=!1!==e.Cb(n,27)._handleBlurEvent(t.target)&&r),"ionChange"===l&&(r=!1!==e.Cb(n,27)._handleInputEvent(t.target)&&r),"ionInput"===l&&(r=!1!==i.filter(t.srcElement.value)&&r),r},m.nb,m.C)),e.Gb(5120,null,v.l,function(n){return[n]},[c.Rb]),e.rb(26,49152,null,0,c.mb,[e.h,e.k,e.B],{animated:[0,"animated"],placeholder:[1,"placeholder"]},null),e.rb(27,16384,null,0,c.Rb,[e.k],null,null),(n()(),e.sb(28,0,null,null,14,"ion-content",[["padding","true"]],null,null,null,m.V,m.k)),e.rb(29,49152,null,0,c.w,[e.h,e.k,e.B],null,null),e.rb(30,16384,null,0,c.f,[e.k],null,null),(n()(),e.sb(31,0,null,0,7,"ion-grid",[],null,null,null,m.Z,m.o)),e.rb(32,49152,null,0,c.C,[e.h,e.k,e.B],null,null),(n()(),e.sb(33,0,null,0,5,"ion-row",[],null,null,null,m.mb,m.B)),e.rb(34,49152,null,0,c.lb,[e.h,e.k,e.B],null,null),(n()(),e.sb(35,0,null,0,3,"ion-col",[],null,null,null,m.U,m.j)),e.rb(36,49152,null,0,c.v,[e.h,e.k,e.B],null,null),(n()(),e.jb(16777216,null,0,1,null,k)),e.rb(38,278528,null,0,f.k,[e.R,e.O,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.sb(39,0,null,0,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],function(n,l,t){var e=!0;return"ionInfinite"===l&&(e=!1!==n.component.loadData(t)&&e),e},m.db,m.r)),e.rb(40,49152,[[1,4]],0,c.G,[e.h,e.k,e.B],{threshold:[0,"threshold"]},null),(n()(),e.sb(41,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","dots"],["loadingText","Carregando mais..."]],null,null,null,m.cb,m.s)),e.rb(42,49152,null,0,c.H,[e.h,e.k,e.B],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null)],function(n,l){var t=l.component;n(l,20,0,"arrow-back",""),n(l,26,0,"","Pesquisar"),n(l,38,0,t.rewardList),n(l,40,0,"100px"),n(l,42,0,"dots","Carregando mais...")},null)}function S(n){return e.Lb(0,[(n()(),e.sb(0,0,null,null,1,"app-prize",[],null,null,null,C,w)),e.rb(1,49152,null,0,p,[c.a,c.Kb,c.Ob,i.a,u.a,d.a],null,null)],null,null)}var x=e.ob("app-prize",p,S,{},{},[]),D=t("ZYCi");t.d(l,"PrizePageModuleNgFactory",function(){return E});var E=e.pb(h,[],function(n){return e.zb([e.Ab(512,e.j,e.eb,[[8,[g.a,x]],[3,e.j],e.z]),e.Ab(4608,f.n,f.m,[e.w,[2,f.x]]),e.Ab(4608,v.v,v.v,[]),e.Ab(4608,c.c,c.c,[e.B,e.g]),e.Ab(4608,c.Kb,c.Kb,[c.c,e.j,e.s]),e.Ab(4608,c.Ob,c.Ob,[c.c,e.j,e.s]),e.Ab(1073742336,f.c,f.c,[]),e.Ab(1073742336,v.t,v.t,[]),e.Ab(1073742336,v.j,v.j,[]),e.Ab(1073742336,c.Gb,c.Gb,[]),e.Ab(1073742336,D.q,D.q,[[2,D.w],[2,D.n]]),e.Ab(1073742336,h,h,[]),e.Ab(1024,D.l,function(){return[[{path:"",component:p}]]},[])])})}}]);